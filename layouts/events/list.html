{{ define "main" }}
{{/* Hero Section */}}
{{ with .Params.banner }}
{{ if .enable }}
<section class="hero bg-main aboutSect d-flex justify-content-center align-items-center">
  <h1 class="inter-700 text-48 text-white text-center">{{ .title | markdownify }}</h1>
</section>

<section class="section d-flex flex-column aboutOverview">
  <div class="container-lg mx-auto">
    <div class="row align-items-center justify-content-center">
      <div class="col-12 col-md-8">
        <p class="dark-700 text-16 inter-400 lh-md mb-4">{{ .content | markdownify }}</p>
      </div>
      <div class="col-12 col-md-4">
        <img src="{{ .image }}" alt="NWB Events" class="img-fluid">
      </div>
    </div>
  </div>
</section>
{{ end }}
{{ end }}
{{/* End Hero Section */}}

<div class="container mt-5 mb-5">
  {{/* Upcoming Events Section - Hardcoded */}}
  <div class="bg-white rounded-3 shadow-sm p-4 mb-5">
    <h3 class="inter-600 text-24 dark-900 mb-4">Upcoming Events</h3>
    <ul class="list-group list-group-flush">
      {{ range where .Pages "File.Path" "in" (slice "content/events/workshop-2025-unam.md" "content/events/cosyne-2025.md" "content/events/workshop-2025-uwashington.md" "content/events/hck22-2025-dataconversion-remote.md" "content/events/hck24-2025-janelia-ndrh.md") }}
      <li class="list-group-item py-3 px-0 border-bottom">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <h4 class="inter-600 text-18 dark-900 mb-1">{{ .Title }}</h4>
            <div class="d-flex flex-wrap gap-3">
              <p class="inter-400 text-14 dark-600 mb-0">
                <i class="fas fa-calendar-alt text-primary me-1"></i>
                {{ .Date.Format "January 2, 2006" }}
                {{ if .Params.endDate }}
                  {{ $startDate := .Date.Format "2006-01-02" }}
                  {{ $endDate := time.AsTime .Params.endDate | time.Format "2006-01-02" }}
                  {{ if ne $startDate $endDate }}
                  - {{ time.AsTime .Params.endDate | time.Format "January 2, 2006" }}
                  {{ end }}
                {{ end }}
              </p>
              {{ with .Params.location }}
              <p class="inter-400 text-14 dark-600 mb-0">
                <i class="fas fa-map-marker-alt text-primary me-1"></i>
                {{ . }}
              </p>
              {{ end }}
              {{ with .Params.eventType }}
              <p class="inter-400 text-14 dark-600 mb-0">
                <i class="fas fa-tag text-primary me-1"></i>
                {{ . }}
              </p>
              {{ end }}
            </div>
          </div>
          <a href="{{ .Permalink }}" class="btn btn-outline-primary btn-sm">View Details</a>
        </div>
      </li>
      {{ end }}
    </ul>
  </div>
  {{/* End Upcoming Events Section */}}

  {{/* All Events Section */}}
  <div class="bg-white rounded-3 shadow-sm p-4">
    <h3 class="inter-600 text-24 dark-900 mb-4">All Events</h3>
    <ul class="list-group list-group-flush">
      {{ $paginator := .Paginate .Pages.ByDate.Reverse 25 }}
      {{ range $paginator.Pages }}
      <li class="list-group-item py-3 px-0 border-bottom">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <h4 class="inter-600 text-18 dark-900 mb-1">{{ .Title }}</h4>
            <div class="d-flex flex-wrap gap-3">
              <p class="inter-400 text-14 dark-600 mb-0">
                <i class="fas fa-calendar-alt text-primary me-1"></i>
                {{ .Date.Format "January 2, 2006" }}
                {{ if .Params.endDate }}
                  {{ $startDate := .Date.Format "2006-01-02" }}
                  {{ $endDate := time.AsTime .Params.endDate | time.Format "2006-01-02" }}
                  {{ if ne $startDate $endDate }}
                  - {{ time.AsTime .Params.endDate | time.Format "January 2, 2006" }}
                  {{ end }}
                {{ end }}
              </p>
              {{ with .Params.location }}
              <p class="inter-400 text-14 dark-600 mb-0">
                <i class="fas fa-map-marker-alt text-primary me-1"></i>
                {{ . }}
              </p>
              {{ end }}
              {{ with .Params.eventType }}
              <p class="inter-400 text-14 dark-600 mb-0">
                <i class="fas fa-tag text-primary me-1"></i>
                {{ . }}
              </p>
              {{ end }}
            </div>
          </div>
          <a href="{{ .Permalink }}" class="btn btn-outline-primary btn-sm">View Details</a>
        </div>
      </li>
      {{ end }}
    </ul>
    
    <!-- Pagination -->
    {{ if gt $paginator.TotalPages 1 }}
    <div class="d-flex justify-content-center mt-4">
      <nav aria-label="Page navigation">
        <ul class="pagination">
          {{ if $paginator.HasPrev }}
          <li class="page-item">
            <a class="page-link" href="{{ $paginator.Prev.URL }}" aria-label="Previous">
              <span aria-hidden="true">&laquo;</span>
            </a>
          </li>
          {{ else }}
          <li class="page-item disabled">
            <span class="page-link">&laquo;</span>
          </li>
          {{ end }}
          
          {{ range $paginator.Pagers }}
          <li class="page-item {{ if eq . $paginator }}active{{ end }}">
            <a class="page-link" href="{{ .URL }}">{{ .PageNumber }}</a>
          </li>
          {{ end }}
          
          {{ if $paginator.HasNext }}
          <li class="page-item">
            <a class="page-link" href="{{ $paginator.Next.URL }}" aria-label="Next">
              <span aria-hidden="true">&raquo;</span>
            </a>
          </li>
          {{ else }}
          <li class="page-item disabled">
            <span class="page-link">&raquo;</span>
          </li>
          {{ end }}
        </ul>
      </nav>
    </div>
    {{ end }}
  </div>
  {{/* End All Events Section */}}
</div>
{{ end }}
